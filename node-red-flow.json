// filename: dashboard/node-red-flow.json
[
  {
    "id": "flow-thermal",
    "type": "tab",
    "label": "Thermal Alert Dashboard",
    "disabled": false,
    "info": ""
  },
  {
    "id": "broker-hivemq",
    "type": "mqtt-broker",
    "name": "HiveMQ Cloud",
    "broker": "2bcacdc6c78e4b73a575478294c5953b.s1.eu.hivemq.cloud",
    "port": "8883",
    "clientid": "",
    "usetls": true,
    "protocolVersion": "4",
    "keepalive": "60",
    "cleansession": true,
    "birthTopic": "",
    "birthQos": "0",
    "birthPayload": "",
    "closeTopic": "",
    "closeQos": "0",
    "closePayload": "",
    "willTopic": "",
    "willQos": "0",
    "willPayload": "",
    "credentials": {
      "user": "Ananthapadmanabhan_Manoj",
      "password": "Padmanabham@23"
    }
  },
  {
    "id": "ui-tab-main",
    "type": "ui_tab",
    "z": "",
    "name": "Thermal Network",
    "icon": "dashboard",
    "disabled": false,
    "hidden": false
  },
  {
    "id": "ui-group-nodes",
    "type": "ui_group",
    "z": "",
    "name": "Node Data",
    "tab": "ui-tab-main",
    "order": 1,
    "disp": true,
    "width": "12",
    "collapse": false
  },
  {
    "id": "ui-group-alerts",
    "type": "ui_group",
    "z": "",
    "name": "Alerts",
    "tab": "ui-tab-main",
    "order": 2,
    "disp": true,
    "width": "12",
    "collapse": false
  },
  {
    "id": "mqtt-in-data",
    "type": "mqtt in",
    "z": "flow-thermal",
    "name": "Node Data",
    "topic": "greenhouse/+/data",
    "qos": "0",
    "datatype": "auto",
    "broker": "broker-hivemq",
    "nl": false,
    "rap": true,
    "rh": 0,
    "x": 130,
    "y": 100,
    "wires": [["json-data"]]
  },
  {
    "id": "json-data",
    "type": "json",
    "z": "flow-thermal",
    "name": "Parse JSON",
    "property": "payload",
    "action": "",
    "pretty": false,
    "x": 320,
    "y": 100,
    "wires": [["fn-tag-node","ui-text-last"]]
  },
  {
    "id": "fn-tag-node",
    "type": "function",
    "z": "flow-thermal",
    "name": "Tag by node",
    "func": "if (msg.payload && msg.payload.node) {\n    msg.topic = msg.payload.node;\n}\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 520,
    "y": 100,
    "wires": [["ui-chart-temp"]]
  },
  {
    "id": "ui-chart-temp",
    "type": "ui_chart",
    "z": "flow-thermal",
    "name": "Temperature History",
    "group": "ui-group-nodes",
    "order": 1,
    "width": 0,
    "height": 0,
    "label": "Temperature (Â°C)",
    "chartType": "line",
    "legend": "true",
    "xformat": "HH:mm:ss",
    "interpolate": "linear",
    "nodata": "No data yet",
    "dot": false,
    "ymin": "0",
    "ymax": "60",
    "removeOlder": "1",
    "removeOlderPoints": "",
    "removeOlderUnit": "3600",
    "cutout": 0,
    "useOneColor": false,
    "useUTC": false,
    "colors": ["#1f77b4","#ff7f0e","#2ca02c"],
    "useOldStyle": false,
    "outputs": 1,
    "x": 740,
    "y": 100,
    "wires": [[]]
  },
  {
    "id": "ui-text-last",
    "type": "ui_text",
    "z": "flow-thermal",
    "group": "ui-group-nodes",
    "order": 2,
    "width": 0,
    "height": 0,
    "name": "Last Reading",
    "label": "Latest Payload",
    "format": "{{msg.payload | json}}",
    "layout": "row-spread",
    "x": 560,
    "y": 160,
    "wires": []
  },
  {
    "id": "mqtt-in-alerts",
    "type": "mqtt in",
    "z": "flow-thermal",
    "name": "Global Alerts",
    "topic": "greenhouse/alerts",
    "qos": "0",
    "datatype": "auto",
    "broker": "broker-hivemq",
    "nl": false,
    "rap": true,
    "rh": 0,
    "x": 150,
    "y": 240,
    "wires": [["json-alerts"]]
  },
  {
    "id": "json-alerts",
    "type": "json",
    "z": "flow-thermal",
    "name": "Parse Alert JSON",
    "property": "payload",
    "action": "",
    "pretty": false,
    "x": 360,
    "y": 240,
    "wires": [["ui-text-alerts"]]
  },
  {
    "id": "ui-text-alerts",
    "type": "ui_text",
    "z": "flow-thermal",
    "group": "ui-group-alerts",
    "order": 1,
    "width": 0,
    "height": 0,
    "name": "Alerts Log",
    "label": "Last Alert",
    "format": "{{msg.payload | json}}",
    "layout": "col-center",
    "x": 590,
    "y": 240,
    "wires": []
  }
]
